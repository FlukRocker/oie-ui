<!DOCTYPE html>
<html>
<head>
	<title>สศอ</title>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="../สศอ/assets/images/logo2.png">

    <link href="../สศอ/assets/bootstrap-5.0.1/css/bootstrap.min.css" rel="stylesheet" >
    <link href="../สศอ/assets/plugins/mscrollbar/jquery.mCustomScrollbar.css" rel="stylesheet"/>
    <link href="../สศอ/assets/plugins/sidebar/sidebar.css" rel="stylesheet">
    <link rel="stylesheet" href="../สศอ/assets/css/sidemenu.css">
    <link rel="stylesheet" type="text/css" href="../สศอ/assets/plugins/select2/css/select2.min.css">
    <link href="../สศอ/assets/plugins/summernote/summernote-lite.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../สศอ/assets/plugins/bootstrap-datepicker/css/bootstrap-datepicker.min.css">

    <link href="../สศอ/assets/plugins/datatable/css/dataTables.bootstrap4.min.css" rel="stylesheet" />
	<link href="../สศอ/assets/plugins/datatable/css/buttons.bootstrap4.min.css" rel="stylesheet">
	<link href="../สศอ/assets/plugins/datatable/css/responsive.bootstrap4.min.css" rel="stylesheet" />
	<link href="../สศอ/assets/plugins/datatable/css/jquery.dataTables.min.css" rel="stylesheet">
	<link href="../สศอ/assets/plugins/datatable/css/responsive.dataTables.min.css" rel="stylesheet">
	<link href="../สศอ/assets/plugins/daterangepicker/daterangepicker.css" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="../สศอ/assets/css/style.css">
</head>
<!-- <body class="main-body app sidebar-mini "> -->
<body class="main-body app sidebar-mini sidenav-toggled">

	<div class="page">
		<div class="app-sidebar__overlay" data-toggle="sidebar"></div>
		<aside class="app-sidebar sidebar-scroll app-sidebar-be">
			<div class="main-sidebar-header p-3 active">
				<a class="desktop-logo active" href="">
					<img src="../สศอ/assets/images/logo3.png" class="main-logo" alt="logo">
				</a>
				<a class="logo-icon mobile-logo py-3 icon-light active" href="">
					<img src="../สศอ/assets/images/logo2.png" class="logo-icon mx-auto" alt="logo">
				</a>
			</div>
			<div class="main-sidemenu">
				<ul class="side-menu">
					<li class="slide">
						<a class="side-menu__item py-2 "  href="#">
							<img src="../สศอ/assets/images/icon/entypo_bar-graph.png" class="side-menu__icon">
							<span class="side-menu__label">Dashbord</span>
						</a>
					</li>

					<li class="slide">
						<a class="side-menu__item py-2"   data-toggle="slide" href="#">
							<img src="../สศอ/assets/images/icon/jam_write-f.png" class="side-menu__icon">
							<span class="side-menu__label">โครงการ</span>
						</a>
						<ul class="slide-menu py-0">
							<li><a class="slide-item py-2" href="/">ข้อเสนอโครงการ</a></li>
							<li><a class="slide-item py-2" href="/">ข้อเสนอโครงการ <br/> (ร่างพรบ.งบประมาณ)</a></li>
							<li><a class="slide-item py-2" href="/">โครงการที่ดำเนินการอยู่</a></li>
							<li><a class="slide-item py-2" href="/">รายงานความก้าวหน้า</a></li>
						</ul>
					</li>
					<li class="slide">
						<a class="side-menu__item py-2"  href="#">
							<img src="../สศอ/assets/images/icon/mdi_email-newsletter.png" class="side-menu__icon">
							<span class="side-menu__label">ข่าวประชาสัมพันธ์</span>
						</a>
					</li>

				</ul>
			</div>
		</aside>
		<div class="main-content app-content">
			
			<nav class="navbar fixed-top navbar-st-1">
			  <div class="container-fluid">
			    <div class="app-sidebar__toggle mx-0" data-toggle="sidebar">
					<a class="open-toggle" href="#"></i></a>
					<a class="close-toggle" href="#"></a>
				</div>

		
			    <div class="dropdown">
				  <a class="btn  dropdown-toggle-1 pe-5" href="#" role="button" id="" data-bs-toggle="dropdown" aria-expanded="false">
				  	<div class="d-flex align-items-center">
				  		<img src="../สศอ/assets/images/Avatar.png" class="Avatar">
				  		<div class="text-color-6 fs-14 spacing-1 ms-2">พีรยา ปัญญาโชจน์</div>
				  	</div>
				  </a>
				  <ul class="dropdown-menu" >
				    <li><a class="dropdown-item text-color-6 fs-14 spacing-1 ms-2" href="#">ออกจากระบบ</a></li>
				  </ul>
				</div>
			  </div>
			</nav>
			<div class="container-fluid">

				<div class="fixed-custom-1 pt-4  px-3">
					<nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb" >
					  <ol class="breadcrumb fs-16">
					    <li class="breadcrumb-item "><a href="#" class="text-color-7 fw-500 text-decoration-none">Dashbord</a></li>
					    <li class="breadcrumb-item active text-color-1 fw-500" aria-current="page">จัดการหน่วยนับ</li>
					  </ol>
					</nav>


				</div>

				<div class="pt-4 pb-3"></div>

				<a href="" class="btn btn-st-2 px-2 mb-4" data-bs-toggle="modal" data-bs-target="#createUnitModal">เพิ่มหน่วยนับ</a>
	


				<div class="row">
					<div class="col">

						<div class="card card-st-3  mb-4">
							<div class="card-body p-0">

								<div class="table-tools d-flex pb-1 flex-wrap align-items-center">

									<button class="btn btn-st-11 btn-export py-2  btn-control   me-auto mb-2 " id="" >
										<img src="../สศอ/assets/images/icon/carbon_export.png" class="mt-n1 me-1" width="18"> นำข้อมูลออก
									</button>
	
									<div class="mb-2">
										<input type="search" name="" id="search" class="form-control form-st-1" placeholder="ค้นชื่อกระทรวง / ชื่อหน่วยงาน" style="min-width: 240px;">
									</div>
								</div>
								<div class="pt-3">
									<table class="table " id="list-table">
										<thead>
											<tr>
												<th class="py-0">
													<div class="form-check form-check-st-1 no-sort">
						  								<input class="form-check-input" type="checkbox" >
													</div>
												</th>
												<th class="py-0">รหัสหน่วยนับ</th>
												<th class="select2-filter py-0">ชื่อหน่วยนับ</th>
												<th class="select2-filter py-0">
													สถานะ
													<select class="select2-c20" name="">
														<option value="" selected="">แสดงทั้งหมด</option>
														<option value="เปิดใช้งาน">เปิดใช้งาน</option>
														<option value="ปิดใช้งาน">ปิดใช้งาน</option>
													</select>
												</th>
											</tr>
										</thead>
									</table>
								</div>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>

	</div>


	<div class="modal fade" id="createUnitModal" tabindex="-1"  aria-hidden="true">
	  <div class="modal-dialog modal-dialog-centered" style="max-width: 500px;">
	    <div class="modal-content " style="border-radius: 15px;">
	      <div class="modal-body pb-3">

	      	<form class="needs-validation" novalidate>
		      	<button type="button" class="btn-close btn-close-2" data-bs-dismiss="modal" aria-label="Close"></button>
		        <div class="text-color-8 fs-16 fw-500 mb-3 pb-3">เพิ่มหน่วยนับ</div>

		        <div class="mb-4">
		        	<label class="text-dark fs-16 mb-2 fw-light">ชื่อหน่วยนับ</label>
		        	<input type="text" name="" class="form-control form-st-1 " placeholder="ชื่อหน่วยนับ"  required="" >
		        </div>
		        <div class="d-flex align-items-center mb-4">
		        	<div class="fs-16 text-color-8 me-4 mb-1">สถานะการใช้งาน</div>
		        	<div class="unit-status-check">
		        		<input type="checkbox" name="" class="hide-input" id="unit-check">
		        		<label for="unit-check"></label>
		        	</div>
		        </div>
		        <div class="fw-light fs-16 mb-5">
		        	<span class="me-3">วันที่สร้าง</span>
		        	<span class="text-color-1 me-3">18/03/2565</span>
		        	<span class="me-3">ผู้สร้าง</span>
		        	<span class="text-color-1">นางสาวเบญจวรรณ บัวพิทักษ์</span>
		        </div>
		        <div class="text-center d-flex flex-wrap justify-content-end">
		        	<button type="button" class="btn btn-link text-color-8 text-decoration-none mx-2 mb-3" data-bs-dismiss="modal">ยกเลิก</button>
		        	<button class="btn btn-st-2 mx-2  mb-3 px-0 " style="min-width: 80px;">บันทึก</button>
		        </div>
	        </form>

	      </div>
	    </div>
	  </div>
	</div>

	<div class="modal fade" id="editUnitModal" tabindex="-1"  aria-hidden="true">
	  <div class="modal-dialog modal-dialog-centered" style="max-width: 500px;">
	    <div class="modal-content " style="border-radius: 15px;">
	      <div class="modal-body pb-3">

	      	<form class="needs-validation" novalidate>
		      	<button type="button" class="btn-close btn-close-2" data-bs-dismiss="modal" aria-label="Close"></button>
		        <div class="text-color-8 fs-16 fw-500 mb-3 pb-3">แก้ไขหน่วยนับ</div>

		        <div class="mb-4">
		        	<label class="text-dark fs-16 mb-2 fw-light">รหัสหน่วยนับ</label>
		        	<input type="text" name="" class="form-control form-st-1 " placeholder=""  value="" readonly="" id="unit_edit_code">
		        </div>
		        <div class="mb-4">
		        	<label class="text-dark fs-16 mb-2 fw-light">ชื่อหน่วยนับ</label>
		        	<input type="text" name="" class="form-control form-st-1 " placeholder="ชื่อหน่วยนับ" required="" id="unit_edit_name">
		        </div>
		        <div class="d-flex align-items-center mb-4">
		        	<div class="fs-16 text-color-8 me-4 mb-1">สถานะการใช้งาน</div>
		        	<div class="unit-status-check">
		        		<input type="checkbox" name="" class="hide-input" id="unit-check-edit">
		        		<label for="unit-check-edit"></label>
		        	</div>
		        </div>
		        <div class="fw-light fs-16 mb-5">
		        	<span class="me-3">วันที่สร้าง</span>
		        	<span class="text-color-1 me-3">18/03/2565</span>
		        	<span class="me-3">ผู้สร้าง</span>
		        	<span class="text-color-1">นางสาวเบญจวรรณ บัวพิทักษ์</span>
		        </div>
		        <input type="hidden" name="unit_id" id="unit_edit_id">
		        <div class="text-center d-flex flex-wrap justify-content-end">
		        	<button type="button" class="btn btn-link text-color-8 text-decoration-none mx-2 mb-3" data-bs-dismiss="modal">ยกเลิก</button>
		        	<button class="btn btn-st-2 mx-2  mb-3 px-0 " style="min-width: 80px;">บันทึก</button>
		        </div>
	        </form>

	      </div>
	    </div>
	  </div>
	</div>

	<div class="modal fade" id="successModal" tabindex="-1"  aria-hidden="true">
	  <div class="modal-dialog modal-dialog-centered" style="max-width: 400px;">
	    <div class="modal-content " style="border-radius: 15px;">
	      <div class="modal-body pb-5">

		      	<button type="button" class="btn-close btn-close-2" data-bs-dismiss="modal" aria-label="Close"></button>
		        
		        <div class="text-center pt-5 pb-4">
		        	<div class="mx-auto i-success" style="">
						<svg width="28" height="20" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M3 10L10.3333 17.5L25 2.5" stroke="#4AD991" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
		        	</div>
		        </div>
		        <div class="text-center fw-bold fs-20 mb-2">บันทึกข้อมูลสำเร็จ</div>
		        <div class="text-center fs-18">ระบบทำการบันทึกข้อมูลเรียบร้อยแล้ว</div>

	      </div>
	    </div>
	  </div>
	</div>



	<!-- End Page -->

	<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	<script src="../สศอ/assets/plugins/moment/moment.js"></script>
	<script src="../สศอ/assets/bootstrap-5.0.1/js/bootstrap.bundle.min.js" ></script> 
	<script src="../สศอ/assets/plugins/mscrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
	<script src="../สศอ/assets/plugins/side-menu/sidemenu.js"></script>
	<script src="../สศอ/assets/plugins/sidebar/sidebar.js"></script>
	<script src="../สศอ/assets/plugins/sidebar/sidebar-custom.js"></script>
	<script src="../สศอ/assets/plugins/select2/js/select2.min.js" ></script> 
	<script src="../สศอ/assets/plugins/summernote/summernote-lite.min.js"></script>
	<script type="text/javascript" src="../สศอ/assets/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>

	<script src="../สศอ/assets/plugins/datatable/js/jquery.dataTables.min.js"></script>
	<script src="../สศอ/assets/plugins/datatable/js/dataTables.dataTables.min.js"></script>
	<script src="../สศอ/assets/plugins/datatable/js/dataTables.responsive.min.js"></script>
	<script src="../สศอ/assets/plugins/datatable/js/responsive.dataTables.min.js"></script>
	<script src="../สศอ/assets/plugins/datatable/js/jquery.dataTables.js"></script>
	<script src="../สศอ/assets/plugins/datatable/js/dataTables.bootstrap4.js"></script>
	<script src="../สศอ/assets/plugins/datatable/js/dataTables.buttons.min.js"></script>
	<script src="../สศอ/assets/plugins/datatable/js/buttons.bootstrap4.min.js"></script>
	<script src="../สศอ/assets/plugins/datatable/js/jszip.min.js"></script>
	<script src="../สศอ/assets/plugins/datatable/js/pdfmake.min.js"></script>
	<script src="../สศอ/assets/plugins/datatable/js/vfs_fonts.js"></script>
	<script src="../สศอ/assets/plugins/datatable/js/buttons.html5.min.js"></script>
	<script src="../สศอ/assets/plugins/datatable/js/buttons.print.min.js"></script>
	<script src="../สศอ/assets/plugins/datatable/js/buttons.colVis.min.js"></script>
	<script src="../สศอ/assets/plugins/datatable/js/dataTables.responsive.min.js"></script>
	<script src="../สศอ/assets/plugins/datatable/js/responsive.bootstrap4.min.js"></script>
	<script src="../สศอ/assets/plugins/daterangepicker/daterangepicker.js"></script>
	
	<script type="text/javascript">
    	var successModal = new bootstrap.Modal(document.getElementById('successModal'), {
		  keyboard: false
		})

		var editUnitModal = new bootstrap.Modal(document.getElementById('editUnitModal'), {
		  keyboard: false
		})

		var createUnitModal = new bootstrap.Modal(document.getElementById('createUnitModal'), {
		  keyboard: false
		})
		// 
    </script>
	<script type="text/javascript">

		(function () {
		  'use strict'
		  var forms = document.querySelectorAll('.needs-validation')
		  Array.prototype.slice.call(forms)
		    .forEach(function (form) {
		      form.addEventListener('submit', function (event) {
		        if (!form.checkValidity()) {
		          event.preventDefault()
		          event.stopPropagation()

		        }else{


		        	event.preventDefault()
		          	event.stopPropagation()
		          	createUnitModal.hide()
		          	editUnitModal.hide()
		        	successModal.show()
		        }

		        form.classList.add('was-validated')
		      }, false)
		    })
		})()
	</script>

	<script type="text/javascript">

		var myData4 = [
		    {
		        "id": 1,
		        "unit_code":"PDSS64/001-A",
		        "unit_name": "ชื่อหน่วยนับ",
		        "status": 0,
		    },
		    {
		        "id": 2,
		        "unit_code":"PDSS64/001-A",
		        "unit_name": "ชื่อหน่วยนับ",
		        "status": 1,
		    },
		    {
		        "id": 3,
		        "unit_code":"PDSS64/001-A",
		        "unit_name": "ชื่อหน่วยนับ",
		        "status": 0,
		    },
		    {
		        "id": 4,
		        "unit_code":"PDSS64/001-A",
		        "unit_name": "ชื่อหน่วยนับ",
		        "status": 1,
		    },
		    {
		        "id": 1,
		        "unit_code":"PDSS64/001-A",
		        "unit_name": "ชื่อหน่วยนับ",
		        "status": 0,
		    },
		    {
		        "id": 2,
		        "unit_code":"PDSS64/001-A",
		        "unit_name": "ชื่อหน่วยนับ",
		        "status": 1,
		    },
		    {
		        "id": 3,
		        "unit_code":"PDSS64/001-A",
		        "unit_name": "ชื่อหน่วยนับ",
		        "status": 0,
		    },
		    {
		        "id": 4,
		        "unit_code":"PDSS64/001-A",
		        "unit_name": "ชื่อหน่วยนับ",
		        "status": 1,
		    }

		];


		var table =	$('#list-table').DataTable({
	        scrollX:        true,
	        scrollCollapse: true,
			data: myData4,
		    columns: [
		        { data: 'id' },
		        { data: 'unit_code' },
		        { data: 'unit_name' },
		        { data: 'status' }
		    ],
		    columnDefs : [

		    	{ targets : [0],className:"text-center align-middle w-30px ","orderable": false,
		    		render : function (data, type, row) {
			          	var html = "";
			          	html += '<div class="form-check form-check-st-1"><input class="form-check-input" type="checkbox" value="'+data+'" ></div>';
			            return html;
			        }
		    	},
		        { targets : [1],className:"align-middle text-left w-100px ","orderable": false,
		        	render : function (data, type, row) {
			          	
			            var html = "";
			          	html += '<button class="alink-st-1 btn-link btn btn-edit"  data-id="'+row.id+'" data-code="'+row.unit_code+'" data-name="'+row.unit_name+'" data-status="'+row.status+'">'+data+'</button >';
			            return html;
			        }
		    	},
		        { targets : [2],className:"align-middle text-left","width":84,"orderable": true,
		        	render : function (data, type, row) {
			          	var html = "";
			          	html += '<div class="">'+data+'</div>'
			            return html;
			        }
		    	}
		    	,
		    	{ targets : [3],className:"align-middle text-center   w-100px ","width":5,"orderable": false,
		        	render : function (data, type, row) {
			          	var html = "";
			          	html += '<div class="unitstatus-table">'
			          	if(data == 0){
			          		html += '<div class="unit-status status-0">ปิดใช้งาน</div>'
			          	}else if(data == 1){
			          		html += '<div class="unit-status status-1">เปิดใช้งาน</div>'
			          	}
			          	
			          	html += '</div>'
			            return html;
			        }
		    	}
				  				
							  			
		    ],
			language: {
				searchPlaceholder: 'ค้นหา เลขที่, ชื่อผู้จำหน่าย',
				sSearch: '',
				lengthMenu: '_MENU_',
				oPaginate: {
			   		sNext: '<i class="fa fa-chevron-right"></i>',
			   		sPrevious: '<i class="fa fa-chevron-left"></i>',
			   		sFirst: '<i class="fa fa-chevron-left"></i>',
			   		sLast: '<i class="fa fa-chevron-right"></i>'
			    }
			},
			aLengthMenu: [
		        [10,25, 50, 100, 200, -1],
		        [10,25, 50, 100, 200, "All"]
		    ],
		    iDisplayLength:-1,
			// "ordering": true,
			"dom": '<<t>ilp>',
		});


		$('#search').keyup(function(){
		      table.search($(this).val()).draw() ;
		})


		$(".select2-c20").select2({
				minimumResultsForSearch: Infinity
		});

		$('.select2-c20').on('select2:select', function (e) {
		    var data = e.params.data;
		    var text = data.text;
		    if(data.text == 'แสดงทั้งหมด'){
		    	text = '';
		    }
		    table.column(3).search( text,true, false, true  ).draw();
		});

	</script>
	<script type="text/javascript">

    	

		$(document).on('click','.btn-edit',function (){
			var unit_id = $(this).attr('data-id')
			var unit_code = $(this).attr('data-code')
			var unit_name = $(this).attr('data-name')
			var unit_status = $(this).attr('data-status')


			$('#unit_edit_id').val(unit_id)
			$('#unit_edit_code').val(unit_code)
			$('#unit_edit_name').val(unit_name)

			if(unit_status == 1){
				$('#unit-check-edit').prop('checked',true)
			}else{
				$('#unit-check-edit').prop('checked',false)
			}

			editUnitModal.show()

		})


    </script>

    

</body>
</html>